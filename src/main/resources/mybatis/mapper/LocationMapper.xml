<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.odd.oddProject.mapper.OddLocationMapper">
    <insert id="insertLocation" parameterType="java.util.HashMap">
        INSERT INTO ODD_LOCATION (ODD_CITY, ODD_COUNTY, ODD_DISTRICT, ODD_DONG, ODD_X, ODD_Y, del_yn)
        VALUES
        <foreach collection="list" item="item" separator=",">
            (
                     #{item.city}
                    , #{item.country}
                    , #{item.district}
                    , #{item.dong}
                    , #{item.x}
                    , #{item.y}
                    , 'Y'
            )
        </foreach>
        ON DUPLICATE KEY UPDATE
        <foreach collection="list" item="item" separator=",">
            ODD_CITY = #{item.city}
            , ODD_COUNTY = #{item.country}
            , ODD_DISTRICT = #{item.district}
            , ODD_DONG = #{item.dong}
            , ODD_X = #{item.x}
            , ODD_Y = #{item.y}
            , del_yn = 'Y'
        </foreach>
    </insert>
    <select id = "selectLocation" parameterType="LocationDto" resultType="LocationDto">
        SELECT *
        FROM ODD_LOCATION L
        WHERE
            <if test= "#{loc.city} != null">
                L.ODD_CITY = #{loc.city}
            </if>
    </select>

</mapper>